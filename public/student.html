<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Student Dashboard | PIP NATION ACADEMY</title>
    <link rel="stylesheet" href="css/globals.css" />
    <link rel="stylesheet" href="css/components.css" />
    <style>
      /* Basic Dashboard Layout and Styling */
      body {
        margin: 0;
        font-family: sans-serif;
        background-color: #f3f4f6;
        color: #222;
      }

      .dashboard-wrapper {
        display: flex;
        height: 100vh;
        overflow: hidden;
      }

      /* Sidebar Styling */
      #sidebar {
        width: 250px; /* Default expanded width */
        min-width: 250px;
        background: #232526;
        color: #f3f4f6;
        transition: all 0.3s ease;
        padding: 20px 0;
        box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
        display: flex;
        flex-direction: column;
        align-items: flex-start;
      }

      #sidebar.collapsed {
        width: 80px; /* Collapsed width */
        min-width: 80px;
        align-items: center;
      }

      .sidebar-header {
        padding: 0 20px 20px 20px;
        font-size: 1.2rem;
        font-weight: bold;
        text-align: left;
      }

      #sidebar.collapsed .sidebar-header {
        display: none; /* Hide full text when collapsed */
      }

      .sidebar-nav {
        width: 100%;
        flex-grow: 1;
      }

      .sidebar-nav a {
        display: flex;
        align-items: center;
        padding: 12px 20px;
        color: #ddd;
        text-decoration: none;
        transition: background 0.2s;
        white-space: nowrap;
      }

      .sidebar-nav a:hover,
      .sidebar-nav a.active {
        background: #333;
        color: #fff;
      }

      .sidebar-nav a span:first-child {
        margin-right: 15px; /* Space between icon and text */
        font-size: 1.2rem;
        width: 30px; /* Ensures icon alignment when collapsed */
        text-align: center;
      }

      #sidebar.collapsed .sidebar-nav a {
        justify-content: center;
        padding: 12px 0;
      }

      #sidebar.collapsed .sidebar-nav a span:last-child {
        display: none; /* Hide text when collapsed */
      }

      /* Toggle Button */
      .sidebar-toggle {
        background: #007bff;
        color: white;
        border: none;
        padding: 10px;
        cursor: pointer;
        align-self: center;
        border-radius: 4px;
        margin-top: 10px;
        font-size: 1rem;
      }

      /* Main Content Styling */
      #main-content {
        flex-grow: 1;
        overflow-y: auto;
        padding: 20px;
        transition: margin-left 0.3s ease;
      }

      .dashboard-header {
        background: #fff;
        padding: 15px 20px;
        border-bottom: 1px solid #ddd;
        margin: -20px -20px 20px -20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .card-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .dashboard-card {
        background: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      }

      .card-title {
        font-size: 1.1rem;
        margin-bottom: 10px;
        color: #007bff;
      }

      .stat-value {
        font-size: 2rem;
        font-weight: bold;
        color: #232526;
      }

      .alert-info {
        background: #e0f7fa;
        border-left: 5px solid #00bcd4;
        padding: 15px;
        margin-bottom: 20px;
        border-radius: 4px;
      }

      /* Tablet and Mobile Adjustments */
      @media (max-width: 768px) {
        #sidebar {
          position: absolute;
          left: 0;
          z-index: 100;
          height: 100vh;
          transform: translateX(-250px);
          box-shadow: none;
        }

        #sidebar:not(.collapsed) {
          transform: translateX(0);
          box-shadow: 2px 0 5px rgba(0, 0, 0, 0.5);
        }

        .sidebar-toggle {
          order: -1;
          margin: 0;
        }

        .dashboard-header {
          margin-bottom: 0;
        }
      }
    </style>
  </head>
  <body>
    <div class="dashboard-wrapper">
      <aside id="sidebar">
        <div class="sidebar-header">üìà PIP NATION ACADEMY</div>
        <nav class="sidebar-nav">
          <a href="#overview" class="active">
            <span>üè†</span><span>Dashboard</span>
          </a>
          <a href="#courses"><span>üìö</span><span>My Courses</span></a>
          <a href="#live"><span>üìä</span><span>Live Sessions</span></a>
          <a href="#ftmo-tracker"><span>üèÜ</span><span>FTMO Tracker</span></a>
          <a href="#payments"><span>üí≥</span><span>Payments</span></a>
          <a href="#settings"><span>‚öôÔ∏è</span><span>Settings</span></a>
          <a href="index.html"><span>üö™</span><span>Logout</span></a>
        </nav>
        <button class="sidebar-toggle" onclick="toggleSidebar()">
          <span id="toggle-icon">‚óÄÔ∏è</span>
        </button>
      </aside>

      <main id="main-content">
        <div class="dashboard-header">
          <h2>Welcome back, Student!</h2>
          <div class="profile">
            <p>Tier: Core</p>
          </div>
        </div>

        <div class="alert-info">
          üîî <span id="next-live-session">Loading next live session...</span>
        </div>

        <section id="overview">
          <h3>General Progress</h3>
          <div class="card-grid">
            <div class="dashboard-card">
              <div class="card-title">Course Completion</div>
              <div class="stat-value">--</div>
              <p>Module -- in progress</p>
            </div>
            <div class="dashboard-card">
              <div class="card-title">Live Sessions Attended</div>
              <div class="stat-value">--</div>
              <p>Join the next one!</p>
            </div>
            <div class="dashboard-card">
              <div class="card-title">1-on-1 Sessions Left</div>
              <div class="stat-value">--</div>
              <p>Book your time slot</p>
            </div>
          </div>
        </section>

        <section id="courses">
          <h3>üìö My Courses</h3>
          <div class="dashboard-card">Loading course modules...</div>
        </section>

        <section id="live">
          <h3>üìä Upcoming Live Sessions</h3>
          <div class="dashboard-card">Loading session schedule...</div>
        </section>

        <section id="ftmo-tracker">
          <h3>üèÜ FTMO Challenge Status</h3>
          <div class="dashboard-card">Loading tracker status...</div>
        </section>

        <section id="payments">
          <h3>üí≥ Payment and Enrollment</h3>
          <div class="dashboard-card">
            <table>
              <thead>
                <tr>
                  <th>Tier</th>
                  <th>Amount</th>
                  <th>Date</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Core Mentorship</td>
                  <td>$499</td>
                  <td>2025-10-20</td>
                  <td>‚úÖ Confirmed</td>
                </tr>
              </tbody>
            </table>
            <p style="margin-top: 15px">
              Need to upgrade? View the <a href="#pricing">pricing page</a> to
              access PRO features like FTMO coaching.
            </p>
          </div>
        </section>
      </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.3/dist/umd/supabase.min.js"></script>
    <script src="js/i18n.js"></script>
    <script src="js/main.js"></script>
    <script src="js/interactions.js"></script>

    <script>
      // --- AUTOMATIC SCROLL TO #courses ---
      window.addEventListener("load", () => {
        if (window.location.hash === "#courses") {
          const coursesSection = document.getElementById("courses");
          if (coursesSection) {
            setTimeout(() => {
              coursesSection.scrollIntoView({
                behavior: "smooth",
                block: "start",
              });
            }, 500);
          }
        }
      });
    </script>
  </body>
</html>
